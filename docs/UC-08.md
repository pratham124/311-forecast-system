# Use Case UC-08: Compare Demand and Forecasts Across Categories and Geographies

**Goal in Context**: Enable comparison of historical demand and forecasted demand across service categories and geographic regions so planners can prioritize resources and identify regional differences.  
**Scope**: Operations Analytics System  
**Level**: User Goal  
**Primary Actor**: City Planner  
**Secondary Actors**: Data Storage System, Forecasting Engine, Visualization Module  
**Trigger**: City Planner opens the comparative analysis interface.

---

## Success End Condition
* Historical and forecast demand data are displayed in a comparative format across selected categories and geographies.  
* City Planner can identify differences and prioritize resources accordingly.

## Failed End Condition
* Comparative data cannot be retrieved or displayed; system logs the failure and shows an error state.

---

## Preconditions
* Historical demand data is available.  
* Forecast data is available.  
* Geographic and category classifications are defined.  
* Visualization services are operational.

---

## Main Success Scenario
1. City Planner accesses the comparative analysis interface.  
2. System displays filter options for service categories, geographic regions, and time range.  
3. City Planner selects categories, geographies, and time period for comparison.  
4. System retrieves historical demand data matching selections.  
5. System retrieves forecast demand data matching selections.  
6. System aligns historical and forecast data on comparable dimensions.  
7. System aggregates and prepares data for comparative visualization.  
8. System renders charts or tables showing side-by-side or overlaid comparisons.  
9. City Planner reviews the displayed comparisons.  
10. System logs successful retrieval and visualization.

---

## Extensions
* **4a**: No historical data available  
  * 4a1: System logs missing historical data.  
  * 4a2: System displays available forecast data only.  

* **5a**: Forecast data unavailable  
  * 5a1: System logs missing forecast data.  
  * 5a2: System displays historical data only.  

* **6a**: Data alignment issue  
  * 6a1: System logs alignment error.  
  * 6a2: System displays error state.  

* **8a**: Visualization rendering error  
  * 8a1: System logs rendering failure.  
  * 8a2: System displays error state.

---

## Related Information
* **Priority**: Medium  
* **Frequency**: As needed for planning and analysis  
* **Open Issues**: Standard comparison views and aggregation rules not yet finalized.

# UC-08 Fully Dressed Scenario Narratives  
**Use Case:** Compare Demand and Forecasts Across Categories and Geographies  

---

## Main Success Scenario Narrative

A city planner wants to understand how demand and forecasts differ across service categories and geographic regions to guide resource prioritization. The planner opens the comparative analysis interface.

The system presents filtering options for service categories, geographic areas (such as wards), and time ranges. The planner selects specific categories, regions, and the period for comparison.

The system retrieves historical demand data that matches the selected filters. It also retrieves forecast demand data for the same categories, geographies, and time horizon.

The system aligns the historical and forecast datasets so they can be compared on consistent dimensions such as time intervals and geographic boundaries.

Next, the system aggregates and prepares the data, ensuring it is structured for comparative visualization.

The visualization module renders charts or tables showing side-by-side or overlaid comparisons of historical demand and forecasts across the selected categories and regions.

The planner reviews the comparisons to identify patterns, regional differences, and priority areas for resource allocation.

The system logs successful data retrieval and visualization.

---

## Alternative Scenario 4a — No Historical Data Available

The planner selects filters, but the system cannot find matching historical demand records.

The system logs the missing historical data condition.

The visualization module displays available forecast data only, with a message indicating that historical data could not be retrieved.

---

## Alternative Scenario 5a — Forecast Data Unavailable

The system retrieves historical demand data successfully, but forecast data for the selected filters is unavailable.

The system logs the missing forecast data condition.

The visualization module displays historical demand only, with a message noting the absence of forecast data.

---

## Alternative Scenario 6a — Data Alignment Issue

The system retrieves both historical and forecast data, but encounters an issue aligning them — for example, mismatched time intervals, incompatible geographic definitions, or inconsistent categorization.

The system logs the alignment error and cannot prepare a reliable comparison.

An error state is displayed instead of comparative charts.

---

## Alternative Scenario 8a — Visualization Rendering Error

All required data is retrieved and aligned successfully. However, the visualization module encounters a rendering error.

The system logs the rendering failure and displays an error state.

No comparative charts or tables are shown.

---

## Key Behavioral Theme Across All Alternatives

Across all failure scenarios:

- The system avoids presenting misleading comparisons  
- Missing or incompatible data conditions are clearly indicated  
- Errors are logged for monitoring and investigation  
- The planner either sees valid comparative data or a clear error/limitation message
